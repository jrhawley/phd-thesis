% ==============================================================================
% Environment
% ==============================================================================
% template for University of Toronto dissertation
\documentclass[oneside,doublespacing]{ut-thesis}
% \usepackage[left=2cm, right=2cm, bottom=2cm, top=2cm]{geometry}
% separate text into multiple LaTeX files
\usepackage{subfiles}
% intelligently handle single and double quotes
\usepackage{quotes}
% special functions for handling the table of contents
\usepackage{tocloft}
% indent the first line of a paragraph
\usepackage{indentfirst}
% commands for inserting images
\usepackage{graphicx}
% commands for dealing with initializations, abbreviations, and glossaries
\usepackage{glossaries}
% commands for dealing with chapter/section/etc counters
\usepackage{chngcntr}
% intelligently handle long captions for figures and tables
\usepackage{ccaption}
% customize how enumerated lists are rendered (re-defines enumerate environment)
\usepackage{enumerate}
% intelligently split long tables across pages
\usepackage{ltablex}
% slight adjustments to special characters like ~
\usepackage{textcomp}
% monotype and teletype fonts for code blocks
\usepackage{listings}
% handle citations to external documents
\usepackage[backend=biber, style=nature, sorting=none]{biblatex}
% create hyperlinks for jumping around the document
\usepackage{hyperref}
% handle internal document references to figures, tables, and more
\usepackage[capitalize, noabbrev]{cleveref}

% load the Zotero library Bibtex file
\addbibresource{thesis.bib}

% UofT thesis template items
\author{James Hawley}
\title{Genomic and epigenomic aberrations of gene regulation in prostate cancer and leukemia}
\degree{Doctor of Philosophy}
\department{Medical Biophysics}
\gradyear{2021}

% ==============================================================================
% Functions and commands
% ==============================================================================

% Appendix naming
% ------------------------------------------------
\newcommand{\listappendicesname}{List of Appendices}
\newlistof{appendices}{apc}{\listappendicesname}
\newcommand{\appendices}[1]{\addcontentsline{apc}{appendices}{#1}}

% Figure placement
% ------------------------------------------------
% Typical figure layout and placement
% #1 = image file
% #2 = figure title
% #3 = figure caption
% #4 = figure reference label
\newcommand{\newfigure}[4]{
  % Start figure environment
  \begin{figure}
    \centering
    % Include the figure
    \includegraphics[width=0.9\textwidth]{#1}
    % Add the figure caption
    \caption[#2]{\textbf{#2.} #3}
    % Add the label for internal referencing
    \label{#4}
  \end{figure}
}

% Figure layout and placement for a figure with a long caption
% #1 = image file
% #2 = figure title
% #3 = figure caption
% #4 = figure reference label
\newcommand{\newlongfigure}[4]{
  % Start figure environment
  \begin{figure}
    \centering
    % Start add the figure
    \includegraphics[width=0.9\textwidth]{#1}
    % Include the figure title, state the caption is on the next page
    \caption[#2]{\textbf{#2.} (Continued on the following page)}
    % Add the label for internal referencing
    \label{#4}
  \end{figure}
  % Create the next figure that will just hold the caption
  \begin{figure}
    % Print the long caption
    \contcaption{#3}
  \end{figure}
}

% Table layout for long tables
% #1 = table column layout
% #2 = table title
% #3 = table header
% #4 = table reference label
% #5 = table content
\newcommand{\newlongtable}[5]{
  \begin{tabularx}{\linewidth}{#1}
  \caption{\textbf{#2.}} \\
  \label{#4}
  #3 \\
  \hline
  \endfirsthead
  #3 \\
  \hline
  \endhead
  \multicolumn{2}{r}{\footnotesize(Continued)}
  \endfoot
  \hline
  \endlastfoot
  #5
  \end{tabularx}
}

% Fix the vertical spacing for the tilde
\renewcommand{\textapprox}{\raisebox{0.5ex}{\texttildelow}}

% Define default formatting for listing code blocks
\lstset{
  language=bash,
  breaklines=true,
  showstringspaces=false,
}

% ==============================================================================
% Document
% ==============================================================================
\begin{document}

% Front Matter
% ------------------------------------------------
\frontmatter
\subfile{frontmatter/title}
\subfile{frontmatter/abstract}
\subfile{frontmatter/acknowledgments}
\subfile{frontmatter/toc}
\subfile{frontmatter/tables_list}
\subfile{frontmatter/figures_list}
% \subfile{frontmatter/appendices_list}

% Main Matter
% ------------------------------------------------
\mainmatter
% intro
\subfile{mainmatter/chapter1}

% FOXA1 CREs
\subfile{mainmatter/chapter2}

% prostate cancer 3D genome
\subfile{mainmatter/chapter3}

% n=1 RNA-seq method
\subfile{mainmatter/chapter4}

% B-ALL DNA methylation
\subfile{mainmatter/chapter5}

% discussion and future directions
\subfile{mainmatter/chapter6}

% Back Matter
% ------------------------------------------------
\subfile{backmatter/appendices}
\backmatter
\subfile{backmatter/references}
\end{document}
